jQuery(function(u){"use strict";var t=u("body"),l={message:null,overlayCSS:{background:"#fff",opacity:.7},ignoreIfBlocked:!0};u.fn.yith_ywsbs_variations=function(){var t=u(".variations_form"),o=t.find(".single_add_to_cart_button");t.on("found_variation",function(t,n){1==n.is_subscription?o.text(yith_ywsbs_frontend.add_to_cart_label):o.text(yith_ywsbs_frontend.default_cart_label)})},t.hasClass("single-product")&&u.fn.yith_ywsbs_variations();var e=!1,r=!1,f=function(){e.fadeOut("slow")};u(document).on("click",".ywsbs-dropdown-item, .open-modal",function(t){t.stopPropagation();var n,o,s,a,i,c=u(this).data("target");e=u("#"+c),r=e.find(".ywsbs-modal-wrapper"),n=r.width(),o=r.width(),s=u(window).width(),a=(u(window).height()-o)/2+"px",i=n<s-100?n+"px":"auto",r.css({"margin-top":a,"margin-bottom":a,width:i}),e.fadeIn("slow")}),u(document).on("click",".ywsbs-modal .close",function(t){t.preventDefault(),f()}),u(window).on("click",function(t){var n=t.target;u(n).hasClass("ywsbs-modal-container")&&f()}),u(document).on("click",".ywsbs-action-button",function(t){t.preventDefault();var n=u(this),o=n.closest(".ywsbs-action-button-wrap"),s=n.closest(".ywsbs-modal-body"),a=s.find(".ywsbs-content-text"),i=s.find(".close-modal-wrap"),c=n.data("action"),e=n.data("id"),r=n.data("nonce");o.block(l);var d={subscription_id:e,action:"ywsbs_"+c+"_subscription",change_status:c,security:r,context:"frontend"};u.ajax({url:yith_ywsbs_frontend.ajaxurl,data:d,type:"POST",success:function(t){t.success&&a.html(t.success),t.error&&a.html('<span class="error">'+t.error+"</span>"),n.fadeOut(),i.fadeOut(),setTimeout(function(){f(),function t(){u.post(document.location.href,function(t){if(""!=t){var n=u("<div></div>").html(t).find(".ywsbs-subscription-view-wrap");u(".ywsbs-subscription-view-wrap").html(n.html())}})}()},2500)},complete:function(){o.unblock()}})})});